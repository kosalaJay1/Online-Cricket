<!DOCTYPE html>
<html>
<head>
    <title>Team Digit Cricket Game</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f5f5f5;
            padding: 20px;
        }
        #container {
            max-width: 900px;
            margin: auto;
            background: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.2);
        }
        h2 {
            margin-top: 0;
        }
        .box-row {
            display: flex;
            gap: 5px;
            margin-bottom: 10px;
        }
        .digit-box {
            width: 40px;
            height: 40px;
            font-size: 20px;
            text-align: center;
        }
        .hidden {
            display: none;
        }
        #playersList li {
            margin: 5px 0;
        }
        button {
            padding: 8px 15px;
            font-size: 16px;
            cursor: pointer;
        }
        #resultBox {
            background: #e3ffe3;
            border-left: 5px solid #28a745;
            padding: 10px;
            margin-top: 20px;
            border-radius: 6px;
        }
        #teamTurn {
            background: #d8ecff;
            border-left: 5px solid #007bff;
            padding: 10px;
            margin: 10px 0;
            border-radius: 6px;
        }
    </style>
</head>
<body>

<div id="container">

    <h1>Team Digit Cricket Game</h1>

    <!-- PLAYER JOIN SYSTEM -->
    <div id="joinContainer">
        <h2>Join the Game</h2>

        <input type="text" id="playerName" placeholder="Enter your name">

        <br><br>
        <label>Select Team:</label><br>
        <input type="radio" name="team" value="A"> Team A
        <input type="radio" name="team" value="B"> Team B

        <br><br>
        <button onclick="joinGame()">Join</button>

        <h3>Players Joined:</h3>
        <ul id="playersList"></ul>

        <button onclick="startGame()">Start Game</button>
    </div>

    <!-- GAME AREA -->
    <div id="gameArea" class="hidden">

        <h2 id="overLabel">Over 1</h2>

        <div id="teamTurn"></div>

        <!-- PLAYER 1 INPUT -->
        <div id="teamAInput">
            <h3>Team A Player Turn (Player 1)</h3>
            <div class="box-row">
                <input class="digit-box" maxlength="1">
                <input class="digit-box" maxlength="1">
                <input class="digit-box" maxlength="1">
                <input class="digit-box" maxlength="1">
                <input class="digit-box" maxlength="1">
                <input class="digit-box" maxlength="1">
            </div>
            <button onclick="submitTeamA()">Submit</button>
        </div>

        <!-- PLAYER 2 INPUT -->
        <div id="teamBInput" class="hidden">
            <h3>Team B Player Turn (Player 2)</h3>
            <div class="box-row">
                <input class="digit-box" maxlength="1">
                <input class="digit-box" maxlength="1">
                <input class="digit-box" maxlength="1">
                <input class="digit-box" maxlength="1">
                <input class="digit-box" maxlength="1">
                <input class="digit-box" maxlength="1">
            </div>
            <button onclick="submitTeamB()">Submit</button>
        </div>

        <!-- RESULT -->
        <div id="resultBox" class="hidden"></div>

        <br>
        <button onclick="nextOver()">Next Over</button>

    </div>

</div>

<script>
let players = [];
let teamA = [];
let teamB = [];
let currentA = 0;
let currentB = 0;

let teamA_digits = [];
let currentOver = 1;

function joinGame() {
    let name = document.getElementById("playerName").value.trim();
    let team = document.querySelector("input[name='team']:checked");

    if (name === "") {
        alert("Enter name.");
        return;
    }
    if (!team) {
        alert("Select a team.");
        return;
    }

    let teamName = team.value === "A" ? "Team A" : "Team B";
    players.push({ name, team: teamName });

    if (teamName === "Team A") teamA.push(name);
    else teamB.push(name);

    updatePlayersList();
    document.getElementById("playerName").value = "";
    team.checked = false;
}

function updatePlayersList() {
    let list = document.getElementById("playersList");
    list.innerHTML = "";
    players.forEach((p, i) => {
        let li = document.createElement("li");
        li.textContent = (i+1) + ". " + p.name + " — " + p.team;
        list.appendChild(li);
    });
}

function startGame() {
    if (teamA.length === 0 || teamB.length === 0) {
        alert("Both teams must have players.");
        return;
    }

    document.getElementById("joinContainer").classList.add("hidden");
    document.getElementById("gameArea").classList.remove("hidden");
    updateTurnDisplay();
}

function updateTurnDisplay() {
    document.getElementById("teamTurn").innerHTML =
        `<b>Team A Player:</b> ${teamA[currentA]}<br>
         <b>Team B Player:</b> ${teamB[currentB]}`;
}

function getDigits(sectionId) {
    let boxes = document.querySelectorAll(`#${sectionId} .digit-box`);
    let digits = [];
    for (let box of boxes) {
        let val = box.value;
        if (val === "" || isNaN(val) || val < 0 || val > 6) {
            alert("Enter digits 0–6 only.");
            return null;
        }
        digits.push(Number(val));
    }
    return digits;
}

function submitTeamA() {
    let digits = getDigits("teamAInput");
    if (!digits) return;
    teamA_digits = digits;

    document.getElementById("teamAInput").classList.add("hidden");
    document.getElementById("teamBInput").classList.remove("hidden");
}

function submitTeamB() {
    let digits = getDigits("teamBInput");
    if (!digits) return;

    let p1 = teamA_digits;
    let p2 = digits;

    let outPosition = -1;

    for (let i = 0; i < 6; i++) {
        if (p1[i] === p2[i]) {
            outPosition = i;
            break;
        }
    }

    let score = outPosition === -1
        ? p1.reduce((a, b) => a + b, 0)
        : p1.slice(0, outPosition).reduce((a, b) => a + b, 0);

    let outText = outPosition === -1
        ? "SAFE"
        : `OUT at position ${outPosition + 1}`;

    let result = `
        <h3>Result</h3>
        <b>Team A digits:</b> ${p1.join(" - ")}<br>
        <b>Team B digits:</b> ${p2.join(" - ")}<br><br>
        <b>Status:</b> ${outText}<br>
        <b>Score this Over:</b> ${score}
    `;

    document.getElementById("resultBox").innerHTML = result;
    document.getElementById("resultBox").classList.remove("hidden");
}

function nextOver() {
    currentOver++;
    document.getElementById("overLabel").innerText = "Over " + currentOver;

    currentA = (currentA + 1) % teamA.length;
    currentB = (currentB + 1) % teamB.length;

    updateTurnDisplay();

    document.querySelectorAll(".digit-box").forEach(b => b.value = "");

    document.getElementById("teamAInput").classList.remove("hidden");
    document.getElementById("teamBInput").classList.add("hidden");
    document.getElementById("resultBox").classList.add("hidden");
}
</script>

</body>
</html>
